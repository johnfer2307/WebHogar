<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendario de Aseo del Hogar 2026 V1.5</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .task-tag {
            font-size: 0.65rem;
            padding: 3px 6px;
            border-radius: 4px;
            margin-bottom: 2px;
            display: block;
            line-height: 1.1;
            font-weight: 600;
        }
        .user-johncito { background-color: #dbeafe; color: #1e40af; border-left: 3px solid #1e40af; }
        .user-prespos { background-color: #fef3c7; color: #92400e; border-left: 3px solid #92400e; }
        .user-katherin { background-color: #fce7f3; color: #9d174d; border-left: 3px solid #9d174d; }
        .user-shared { background-color: #f3f4f6; color: #374151; border-left: 3px solid #9ca3af; }
        
        /* Estilo destacado para Cambio de Camas */
        .task-beds {
            background-color: #1e293b;
            color: #f8fafc;
            border: 1px solid #0f172a;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background-color: #e2e8f0;
        }
        .day-cell {
            background-color: white;
            min-height: 200px; 
            padding: 8px;
            display: flex;
            flex-direction: column;
            transition: all 0.2s;
        }
        .day-cell:hover { background-color: #f8fafc; }
        .holiday-bg { background-color: #fff1f2; }
        .weekend-bg { background-color: #f8fafc; }
        
        @media (max-width: 1024px) {
            .calendar-grid { grid-template-columns: repeat(2, 1fr); }
            .day-cell { min-height: auto; }
        }
        @media (max-width: 640px) {
            .calendar-grid { grid-template-columns: 1fr; }
        }

        .view-btn-active {
            background-color: #334155;
            color: white;
        }
    </style>
</head>
<body class="bg-gray-100 p-4">

    <div class="max-w-7xl mx-auto bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-200">
        <!-- HEADER -->
        <div class="bg-slate-800 p-6 text-white border-b border-slate-700">
            <div class="flex flex-col md:flex-row justify-between items-center gap-6">
                <div>
                    <h1 class="text-3xl font-bold tracking-tight">Calendario de Aseo del Hogar</h1>
                    <p class="text-slate-400 mt-1 uppercase text-xs font-bold tracking-widest">Planificaci√≥n Integral 2026</p>
                </div>
                
                <div class="flex flex-col items-center gap-3">
                    <div class="flex bg-slate-900 p-1 rounded-lg text-[10px] font-bold">
                        <button id="btnMonthView" onclick="setView('month')" class="px-4 py-2 rounded-md transition view-btn-active">MES COMPLETO</button>
                        <button id="btnWeekView" onclick="setView('week')" class="px-4 py-2 rounded-md transition">SEMANAL</button>
                    </div>

                    <div class="flex items-center bg-slate-900 rounded-lg p-1 border border-slate-700">
                        <button onclick="navigate(-1)" class="p-2 hover:bg-slate-700 rounded-md transition">
                            <svg class="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/></svg>
                        </button>
                        <span id="displayLabel" class="text-base font-bold px-4 min-w-[180px] text-center uppercase tracking-wider">Enero 2026</span>
                        <button onclick="navigate(1)" class="p-2 hover:bg-slate-700 rounded-md transition">
                            <svg class="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/></svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- LEYENDA -->
        <div class="px-6 py-3 border-b bg-gray-50 flex flex-wrap gap-4 text-[10px] font-bold text-gray-500 uppercase tracking-tighter">
            <div class="flex items-center gap-2"><span class="w-3 h-3 rounded user-johncito"></span> Johncito</div>
            <div class="flex items-center gap-2"><span class="w-3 h-3 rounded user-prespos"></span> Prespos</div>
            <div class="flex items-center gap-2"><span class="w-3 h-3 rounded user-katherin"></span> Katherin</div>
            <div class="flex items-center gap-2"><span class="w-3 h-3 rounded bg-slate-800"></span> CAMBIO DE CAMAS (S√°bado de por medio)</div>
        </div>

        <!-- CALENDARIO -->
        <div class="p-1">
            <div id="calendarGrid" class="calendar-grid">
                <!-- Inyectado por JS -->
            </div>
        </div>

        <!-- FOOTER -->
        <div class="p-6 bg-slate-50 border-t text-[11px] text-gray-500 grid md:grid-cols-2 gap-6">
            <div class="space-y-2">
                <p class="font-bold text-slate-700">DESAYUNOS Y ALMUERZOS:</p>
                <ul class="list-disc ml-4 space-y-1">
                    <li>Lunes a Viernes: <span class="font-semibold text-slate-600">Prespos</span> (excepto festivos).</li>
                    <li>Fines de semana y Festivos: <span class="font-semibold text-slate-600">Johncito y Katherin</span> (rotaci√≥n secuencial).</li>
                </ul>
            </div>
            <div class="md:text-right space-y-1">
                <p>‚ö†Ô∏è La rotaci√≥n secuencial asegura equilibrio en d√≠as de descanso.</p>
                <p>‚òÅÔ∏è Almohadas J & P: <span class="font-bold">Mi√©rcoles y S√°bados</span>.</p>
                <p class="text-slate-900 font-bold">üõèÔ∏è Cambiar Camas: S√°bado de por medio (17-Ene, 31-Ene, 14-Feb...).</p>
            </div>
        </div>
    </div>

    <script>
        let currentYear = 2026;
        let currentMonth = 0; 
        let currentWeekIndex = 0; 
        let currentView = 'month'; 

        const persons = ['Johncito', 'Prespos', 'Katherin'];
        const dayNames = ["DOM", "LUN", "MAR", "MIE", "JUE", "VIE", "SAB"];
        
        const holidays = [
            '2026-01-01', '2026-01-12', '2026-03-23', '2026-04-02', '2026-04-03', 
            '2026-05-01', '2026-05-18', '2026-06-08', '2026-06-15', '2026-06-29', 
            '2026-07-20', '2026-08-07', '2026-08-17', '2026-10-12', '2026-11-02', 
            '2026-11-16', '2026-12-08', '2026-12-25'
        ];

        function isHoliday(dateStr) { return holidays.includes(dateStr); }

        function getSpecialDayRotation(date) {
            let specialDaysCount = 0;
            let tempDate = new Date(2026, 0, 1);
            while (tempDate <= date) {
                const dayOfWeek = tempDate.getDay();
                const ds = tempDate.toISOString().split('T')[0];
                if (isHoliday(ds) || dayOfWeek === 0 || dayOfWeek === 6) {
                    specialDaysCount++;
                }
                tempDate.setDate(tempDate.getDate() + 1);
            }
            return (specialDaysCount - 1) % 2; 
        }

        function setView(view) {
            currentView = view;
            currentWeekIndex = 0;
            document.getElementById('btnMonthView').classList.toggle('view-btn-active', view === 'month');
            document.getElementById('btnWeekView').classList.toggle('view-btn-active', view === 'week');
            renderCalendar();
        }

        function navigate(delta) {
            if (currentView === 'month') {
                currentMonth += delta;
                if (currentMonth > 11) currentMonth = 11;
                if (currentMonth < 0) currentMonth = 0;
            } else {
                const weeks = getWeeksOfMonth(currentYear, currentMonth);
                currentWeekIndex += delta;
                if (currentWeekIndex < 0) {
                    if (currentMonth > 0) {
                        currentMonth--;
                        const prevWeeks = getWeeksOfMonth(currentYear, currentMonth);
                        currentWeekIndex = prevWeeks.length - 1;
                    } else { currentWeekIndex = 0; }
                } else if (currentWeekIndex >= weeks.length) {
                    if (currentMonth < 11) {
                        currentMonth++;
                        currentWeekIndex = 0;
                    } else { currentWeekIndex = weeks.length - 1; }
                }
            }
            renderCalendar();
        }

        function getWeeksOfMonth(year, month) {
            const weeks = [];
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            let startOffset = (firstDay.getDay() + 6) % 7; 
            let currentDay = 1;
            let week = new Array(7).fill(null);
            for (let i = startOffset; i < 7; i++) week[i] = currentDay++;
            weeks.push(week);
            while (currentDay <= lastDay.getDate()) {
                week = new Array(7).fill(null);
                for (let i = 0; i < 7 && currentDay <= lastDay.getDate(); i++) week[i] = currentDay++;
                weeks.push(week);
            }
            return weeks;
        }

        function getDayTasks(d, month, year) {
            if (!d) return '';
            
            const date = new Date(year, month, d);
            const dayOfWeek = date.getDay();
            const dateStr = date.toISOString().split('T')[0];
            const isH = isHoliday(dateStr);
            const isWeekend = (dayOfWeek === 0 || dayOfWeek === 6);
            
            const startYear = new Date(year, 0, 1);
            const dayOfYear = Math.floor((date - startYear) / 86400000);
            const weekNum = Math.floor((dayOfYear + (startYear.getDay() || 7) - 1) / 7);

            let tasks = [];

            // --- 1. LOGICA CAMBIO DE CAMAS (S√ÅBADO DE POR MEDIO INICIANDO 17-ENE) ---
            if (dayOfWeek === 6) { // Es S√°bado
                // Fecha de referencia: S√°bado 17 de Enero (Semana 2 del a√±o aproximadamente)
                const refDate = new Date(2026, 0, 17);
                // Calculamos cu√°ntos d√≠as han pasado y lo dividimos por 7 para saber cu√°ntas semanas
                const weeksSinceStart = Math.round((date - refDate) / (1000 * 60 * 60 * 24 * 7));
                
                // Si weeksSinceStart es 0 (17-Ene), 2 (31-Ene), 4 (14-Feb)... toca cama
                if (weeksSinceStart >= 0 && weeksSinceStart % 2 === 0) {
                    tasks.push({ text: 'üõèÔ∏è CAMBIAR CAMAS', class: 'task-beds' });
                }
            }

            // --- 2. DESAYUNO Y ALMUERZO ---
            if (!isWeekend && !isH) {
                tasks.push({ text: 'üç¥ Desayuno/Alm: Prespos', class: 'user-prespos' });
            } else {
                const chefName = (getSpecialDayRotation(date) === 0) ? 'Johncito' : 'Katherin';
                tasks.push({ text: `${isH ? 'üéâ' : 'üç¥'} Desayuno/Alm: ${chefName}`, class: `user-${chefName.toLowerCase()}` });
            }

            // --- 3. ASEO DIARIO ---
            const p1 = persons[dayOfYear % 3];
            const p2 = persons[(dayOfYear + 1) % 3];
            const p3 = persons[(dayOfYear + 2) % 3];
            tasks.push({ text: `üßº Ba√±os: ${p1}`, class: `user-${p1.toLowerCase()}` });
            tasks.push({ text: `üßπ Barrer/Trapear: ${p2}`, class: `user-${p2.toLowerCase()}` });
            tasks.push({ text: `üóëÔ∏è Basura: ${p3}`, class: `user-${p3.toLowerCase()}` });

            // --- 4. TAREAS SEMANALES ---
            if (dayOfWeek === 6) { 
                const jOrP = (weekNum % 2 === 0) ? 'Johncito' : 'Prespos';
                tasks.push({ text: `üöø Ducha Ppal: ${jOrP}`, class: `user-${jOrP.toLowerCase()}` });
                tasks.push({ text: 'üöø Ducha Social: Katherin', class: 'user-katherin' });
                tasks.push({ text: '‚òÅÔ∏è Almohadas J & P', class: 'user-shared' });
            }

            if (dayOfWeek === 3) { 
                tasks.push({ text: '‚òÅÔ∏è Almohadas J & P', class: 'user-shared' });
            }

            if (dayOfWeek === 5) { 
                const duster = persons[weekNum % 3];
                tasks.push({ text: `‚ú® Sacudir: ${duster}`, class: `user-${duster.toLowerCase()}` });
            }

            if (dayOfWeek === 3 || dayOfWeek === 5) {
                const laundryIdx = Math.floor(dayOfYear / 3) % 3;
                tasks.push({ text: `üß∫ Ropa: ${persons[laundryIdx]}`, class: `user-${persons[laundryIdx].toLowerCase()}` });
            }

            return tasks.map(t => `<span class="task-tag ${t.class}">${t.text}</span>`).join('');
        }

        function createDayCell(day, month, year) {
            if (!day) return `<div class="bg-gray-50 opacity-40"></div>`;
            
            const date = new Date(year, month, day);
            const isH = isHoliday(date.toISOString().split('T')[0]);
            const isW = (date.getDay() === 0 || date.getDay() === 6);
            const name = dayNames[date.getDay()];
            const tasks = getDayTasks(day, month, year);

            return `
                <div class="day-cell ${isH ? 'holiday-bg' : (isW ? 'weekend-bg' : '')}">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-xl font-black ${isH ? 'text-red-600' : 'text-slate-800'}">${day}</span>
                        <span class="text-[9px] font-bold text-slate-400 tracking-widest">${name}</span>
                    </div>
                    ${isH ? '<div class="text-[7px] text-red-600 font-bold mb-1 uppercase tracking-tighter">Festivo</div>' : ''}
                    <div class="flex-grow space-y-0.5 overflow-hidden">${tasks}</div>
                </div>
            `;
        }

        function renderCalendar() {
            const grid = document.getElementById('calendarGrid');
            const display = document.getElementById('displayLabel');
            const months = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"];
            
            grid.innerHTML = '';
            
            if (currentView === 'month') {
                display.innerText = `${months[currentMonth]} ${currentYear}`;
                const firstDay = new Date(currentYear, currentMonth, 1);
                const lastDay = new Date(currentYear, currentMonth + 1, 0);
                
                let startOffset = (firstDay.getDay() + 6) % 7; 
                for (let i = 0; i < startOffset; i++) grid.innerHTML += createDayCell(null);

                for (let d = 1; d <= lastDay.getDate(); d++) {
                    grid.innerHTML += createDayCell(d, currentMonth, currentYear);
                }
            } else {
                const weeks = getWeeksOfMonth(currentYear, currentMonth);
                display.innerText = `${months[currentMonth]} - SEM ${currentWeekIndex + 1}`;
                weeks[currentWeekIndex].forEach(d => grid.innerHTML += createDayCell(d, currentMonth, currentYear));
            }
        }

        window.onload = renderCalendar;
    </script>
</body>
</html>

